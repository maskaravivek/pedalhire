{% extends 'base.html' %}
{% block content %}
<html>

<head>
    <link rel="stylesheet" href="/static/css/cover.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.min.css" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/js/bootstrap-datetimepicker.min.js"></script>
    <link rel="stylesheet" href="/static/css/cover.css">
    <title>PedalHire</title>
    <style>
        body {
            background-color: black;
            background-size: cover;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            */
        }

        .form-signin {
            color: white;
        }
        .bootstrap-datetimepicker-widget.dropdown-menu {
                background-color: #30363b;
                border-color: #2b3135;
            }
    </style>
    <script>
        $(document).ready(function(){
            $("#startDate").datetimepicker({
                format: 'YYYY-MM-DD hh:mm'
            });
        });
        $(document).ready(function(){
            $("#endDate").datetimepicker({
                format: 'YYYY-MM-DD hh:mm'
            });
        });

        function onSubmit() {
            event.preventDefault();
            const url = "/api/v1/addProduct";
            const data = {
                "name": document.getElementById('name').value,
                "description": document.getElementById('description').value,
                "price": document.getElementById('price').value,
                "startDateTime": document.getElementById('startDateTime').value,
                "endDateTime": document.getElementById('endDateTime').value
            };
            const other_params = {
                headers: { "content-type": "application/json; charset=UTF-8" },
                body: JSON.stringify(data),
                method: "POST",
                mode: "cors"
            };

            fetch(url, other_params)
                .then(function (response) {
                    if (response.ok) {
                        return response.json();
                    } else {
                        throw new Error("Could not reach the API: " + response.statusText);
                    }
                }).then(function (data) {
                    window.location.replace("/merchantProfile");
                }).catch(function (error) {
                    console.log(error.message)
                });
            return true;
        }
    </script>
</head>

<body>
    <div class="site-wrapper">

        <div class="site-wrapper-inner">

            <div class="cover-container">

                <div class="inner cover">
                    <form class="form-signin" method="POST">
                        <div class="text-center">
                            <h2 class="form-signin-heading">Add Product</h2>
                        </div>
                        <div class="row">
                            <div class="form-group col-xs-12">
                                <input type="name" id="name" name="name" class="form-control" placeholder="Name"
                                    required />
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-xs-12">
                                <input type="description" id="description" name="description" class="form-control" placeholder="Description"
                                    required />
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-xs-12">
                                <input type="price" id="price" name="price" class="form-control" placeholder="Price"
                                    required />
                            </div>
                        </div>
                        <div class="row">
                            <div class="form-group col-xs-6">
                                <div class='input-group date' id='startDate'>
                                    <input type='text' id="startDateTime" class="form-control" placeholder="Start Date"/>
                                    <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                                </div>
                            </div>
                            <div class="form-group col-xs-6">
                                <div class='input-group date' id='endDate'>
                                    <input type='text' id="endDateTime" class="form-control" placeholder="End Date"/>
                                    <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="text-center">
                            <button class="btn btn-default" onclick="onSubmit()">Submit</button>
                        </div>
                    </form>
                </div>

            </div>

        </div>

    </div>
</body>

</html>
{% endblock %}